<!-- Links the page to the chosen Google Fonts -->
<head>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Gabriela&family=VT323&display=swap" rel="stylesheet">
</head>

<!-- Links the page to the custom CSS -->
<head>
<link href="www/styles.css" rel="stylesheet">
</head>

```{r global, echo=FALSE, warning=FALSE, message=FALSE}

# Loads libraries and defines chunks defaults
library(dplyr)
library(ggplot2)
library(ggpath)
library(ggiraph)
library(glue)
library(stringr)

knitr::opts_chunk$set(
  echo=FALSE
)

```

<!-- Create containers for the background images and the content -->
<div id="bkg_container"><div id="mega_container">

<!-- Create containers for the background images and the content -->
<div id="top_title">WHERE</div>
<div id="middle_title">IN THE WORLD IS</div>
<div id="bottom_title">Carmen Sandiego?</div>


<!-- Places the first message -->
<img src="www/detective.png" id = "detective">

<div id="msg1">
Welcome to ACME, Detective. We recruited you because of your worldly
knowledge and investigative skills. The sole purpose of our Agency is to
monitor and catch evildoers. We believe that Carmen Sandiego; a.k.a.
<span id="aka1">La Femme Rouge</span>, <span id="aka2">the Crimson Phantom</span>;
is the leader of an Organization that targets National Treasures around the globe.
</div>

<div style="clear:both;"></div>



```{r}

cities <- tibble(
  name = c("MEXICO CITY","LONDON","MOSCOW",
           "ISTANBUL","BAGHDAD","TOKYO",
           "PORT MORESBY","NEW DELHI","BUENOS AIRES",
           "SYDNEY","CITY OF SAN MARINO","SINGAPORE",
           "ROME","REYKJAVIK","PEKING",
           "MONTREAL","LIMA","NEW YORK",
           "PARIS","COLOMBO","BUDAPEST",
           "KATHMANDU","BANGKOK","CAIRO",
           "ATHENS","RIO DE JANEIRO","KIGALI",
           "BAMAKO","MORONI","OSLO"),
  x = c(-0.65,-0.01,0.23,
        0.19,0.26,0.87,
        0.91,0.45,-0.38,
        0.92,0.08,0.65,
        0.10,-0.16,0.72,
        -0.48,-0.49,-0.48,
        0.02,0.50,0.14,
        0.53,0.60,0.20,
        0.15,-0.27,0.19,
        -0.04,0.26,0.05),
  y = c(0.10,0.65,0.70,
        0.35,0.20,0.29,
        -0.30,0.19,-0.64,
        -0.71,0.41,-0.21,
        0.35,0.86,0.38,
        0.55,-0.26,0.43,
        0.53,-0.07,0.48,
        0.25,-0.01,0.20,
        0.33,-0.43,-0.18,
        -0.01,-0.32,0.80)
) %>% 
  dplyr::mutate(tip = tolower(name),
                tip = stringr::str_replace_all(tip, " ", "_"),
                tip = glue::glue("<img style='border-radius:40px;' src='www/cities/{tip}.png'>")) %>% 
  dplyr::mutate(xt = x - 0.037*stringr::str_length(name) - 0.036,
                yt = y + 0.022)

world <- cities %>% 
  ggplot() +
  ggpath::geom_from_path(aes(x = 0, y = 0, path = "www/world.png")) +
  geom_point_interactive(aes(x = x, y = y, tooltip = tip, data_id = name),
                         shape = 22, fill = "#ffff55", color = "black", stroke = 1) +
  geom_text_interactive(aes(x = xt, y = yt, label = name, data_id = name),
                        alpha = 0, family = "VT323", size = 6.5, hjust = 0) +
  coord_equal(xlim = c(-1,1), ylim = c(-1,1), ratio = 0.4) +
  theme_void()

girafe(
  ggobj = world,
  height_svg = 2.9,
  options = list(
    opts_tooltip(
      css = "background-color:transparent;",
      opacity = 1,
    ),
    opts_hover(
      css = girafe_css(
        css = "fill:#ffff55;",
        text = "stroke:black;stroke-width:0.5;fill:#ffff55;"
      )
    )
  )
)

```

</div></div>

<!-- Places the fax image at the bottom -->
<img src="www/fax.png" width="100%">